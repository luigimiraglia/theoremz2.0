/* app/globals.css */
@import "tailwindcss";

/* Light di default */
:root {
  --background: #ffffff;
  --foreground: #0a0a0a;
}
/* Dark quando .dark Ã¨ presente su <html> */
html.dark {
  --background: #0b1220; /* blu scuro */
  --foreground: #e6e8eb; /* testo chiaro */
}

/* Mappatura Tailwind via @theme inline (no tailwind.config) */
@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

/* Fallback diretto su body per sicurezza (anche se usi bg-background / text-foreground) */
html,
body {
  background-color: var(--background);
  color: var(--foreground);
  overflow-x: hidden;
}

/* Smooth anchor scrolling su tutta la pagina */
html[data-scroll-behavior="smooth"] {
  scroll-behavior: smooth;
}

/* Global keyframes used by lesson animations (server-safe) */
@keyframes fadeSlide {
  0% {
    opacity: 0;
    transform: translateY(4px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Animazione gradient shimmer + pulse per CTA acquisto */
@keyframes shimmer {
  0% {
    background-position: 0% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

@keyframes gentlePulse {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.01);
  }
}

@keyframes ctaBreathe {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.02);
  }
}

.cta-breathe {
  animation: ctaBreathe 6.5s ease-in-out infinite;
  transform-origin: center;
  will-change: transform;
}

.btn-gradient-animate {
  background-image: linear-gradient(
    90deg,
    #2563eb 0%,
    #06b6d4 50%,
    #2563eb 100%
  );
  background-size: 200% 100%;
  background-position: 0% 0;
  background-repeat: repeat;
  animation:
    shimmer 4s linear infinite,
    gentlePulse 8s ease-in-out infinite;
  will-change: background-position, transform;
}

@media (prefers-reduced-motion: reduce) {
  .btn-gradient-animate {
    animation: none;
  }
  .cta-breathe {
    animation: none;
  }
}

/* Halo soffuso e pulsante attorno ai CTA acquisto */
@keyframes haloPulse {
  0%,
  100% {
    opacity: 0.45;
    transform: scale(1);
  }
  50% {
    opacity: 0.25;
    transform: scale(1.03);
  }
}

.btn-halo {
  position: relative;
  isolation: isolate; /* ensures pseudo-element layers under */
}

.btn-halo::before {
  content: "";
  position: absolute;
  inset: -8px;
  border-radius: 16px;
  background: radial-gradient(
    60% 60% at 50% 50%,
    rgba(56, 189, 248, 0.35) 0%,
    rgba(37, 99, 235, 0.28) 48%,
    transparent 80%
  );
  filter: blur(18px);
  z-index: -1;
  animation: haloPulse 7s ease-in-out infinite;
}

/* Card halos (usali con moderazione) */
.card-halo {
  position: relative;
  isolation: isolate;
}
.card-halo-sky::before,
.card-halo-emerald::before,
.card-halo-violet::before {
  content: "";
  position: absolute;
  inset: -10px;
  border-radius: 20px;
  filter: blur(20px);
  z-index: -1;
  animation: haloPulse 10s ease-in-out infinite;
}
.card-halo-sky::before {
  background: radial-gradient(
    60% 60% at 50% 50%,
    rgba(56, 189, 248, 0.28) 0%,
    rgba(59, 130, 246, 0.22) 50%,
    transparent 85%
  );
}
.card-halo-emerald::before {
  background: radial-gradient(
    60% 60% at 50% 50%,
    rgba(16, 185, 129, 0.26) 0%,
    rgba(5, 150, 105, 0.2) 50%,
    transparent 85%
  );
}
.card-halo-violet::before {
  background: radial-gradient(
    60% 60% at 50% 50%,
    rgba(244, 114, 182, 0.26) 0%,
    rgba(168, 85, 247, 0.2) 50%,
    transparent 85%
  );
}

/* Toast Animations */
@keyframes slideInFromRight {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideOutToRight {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(100%);
  }
}

@keyframes toastBounce {
  0% {
    transform: scale(0.95);
  }
  50% {
    transform: scale(1.02);
  }
  100% {
    transform: scale(1);
  }
}

.toast-enter {
  animation: slideInFromRight 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.toast-exit {
  animation: slideOutToRight 0.3s cubic-bezier(0.7, 0, 0.84, 0);
}

.toast-bounce {
  animation: toastBounce 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@media (prefers-reduced-motion: reduce) {
  .toast-enter,
  .toast-exit,
  .toast-bounce {
    animation: none;
  }
}
